---
variables_update_rules:
  - 你必须在下一次回复的末尾输出更新分析，使用 <UpdateVariable> 标签包裹
  - 你必须重新审视 <status_current_variables> 属性中定义的变量，并分析如何相应地更新每个变量
  - 对于计数型变量，在对应事件发生时修改，但在同一事件中不得再次修改
  - 当数值型变量发生变化时，检查其是否跨越任何阶段阈值，并更新到对应阶段
  - 有 4 个命令可用于调整数据:
    - _.set: 仅用于设置简单值（string、number、boolean）
      _.assign: 用于向数组或对象中插入内容
      _.remove: 用于从数组或对象中删除内容
      _.add: 用于对数字增加或减少一个增量，仅支持修改数字
  - 如果需要同时赋值或删除多个值，必须多次使用 _.assign 或 _.remove，而不是在单个命令中完成
  - 所有动态添加的变量（如背包中的物品、任务、红线对象等）的键（key）必须使用中文
  - 当一个变量（如物品或联系人）需要重命名时，必须首先使用 '_.remove' 删除旧条目，然后使用 '_.assign' 以新的中文名称作为键来创建一个全新的条目
general_type&check:
  只读变量: &readonly
    readonly. 只读。永不更新或修改
  世界:
    时间: string. 当前的游戏内时间，会随着<user>的行动和剧情推进而更新。严格遵守格式：'辉煌纪元489年-旅人之月(6月)-20日-15:35'
    地点: string. 记录<user>当前所在的具体位置，在<user>移动到新区域时更新。严格遵守格式：'大陆西南部区域-无尽树海-奥古斯提姆帝国-诺瓦·瓦伦蒂亚城(冒险者之城/雨之城)-北城区-冒险者公会-服务大厅'
  任务列表:
    description: object. 当前任务列表，每个任务为一个对象，对象的键名(key)即为任务名称，随故事进展变化。可以添加或删除任务（即增删键值对，任务更新模板在'variables_update_format'中，添加任务时需严格遵守任务更新模板）。某个任务完成后需直接删除该任务
    task: &task
      描述: string. 任务的详细描述
      目标: string. 完成任务需要达成的具体条件
      奖励: string. 完成任务可获得的奖励
    "${任务名}":
      <<: *task
  角色:
    种族: string. <user>的种族，例如：人类、精灵、巫妖、罚魔、翼民、亡灵、飞龙、海龙、魅魔等
    身份: array. <user>的社会身份和社会地位，可同时拥有复数身份，绝不允许拥有重复的身份（身份更新模板在'variables_update_format'中）
    职业: array. <user>的战斗职业和生活职业，可同时拥有复数职业，绝不允许拥有重复的职业（职业更新模板在'variables_update_format'中）
    状态:
      生命层级: *readonly
      等级: *readonly
      累计经验值: number. <user>获得的经验值
      升级所需经验: *readonly
      冒险者等级: string. <user>的冒险者等级
    属性:
      力量: number. 力量属性
      敏捷: number. 敏捷属性
      体质: number. 体质属性
      智力: number. 智力属性
      精神: number. 精神属性
      属性点: number. 仅<user>分配属性时减少该值，不可随意增加，也不会随等级增加而增加
    资源:
      maximum: &maximum
        number. <user>对应属性的最大值。随属性，以及装备、技能、药剂、称号和临时状态的效果实时更新
      actual_value: &actual_value
        number. <user>对应属性的实际值。随战斗、治疗或事件更新，也可通过时间流逝或休息自然恢复。该值不能超过其对应属性的最大值，最低为0，且不允许为负数
      生命值上限: *maximum
      生命值: *actual_value
      法力值上限: *maximum
      法力值: *actual_value
      体力值上限: *maximum
      体力值: *actual_value
  技能列表:
    description: object. 当前<user>拥有的技能列表，每个技能为一个对象，对象的键名(key)即为技能名称，随故事进展变化。仅可以添加技能（技能更新模板在'variables_update_format'中，添加技能时需严格遵守技能更新模板）。技能名称中不要附带品质说明
    skill: &skill
      品质: string. 技能的品质，分为普通、优良、稀有、史诗、传说、神话
      消耗: string. 使用技能的消耗
      描述: string. 技能的效果与描述
      类型: string. 技能类型仅分为'主动'和'被动'
    "${技能名}":
      <<: *skill
  财产:
    背包:
      description: object. 当前<user>背包中的物品列表，每个物品为一个对象，对象的键名(key)即为物品名称，随故事进展变化。可以添加或删除物品（即增删键值对，物品更新模板在'variables_update_format'中，添加物品时需严格遵守物品更新模板）。物品名称中不要附带品质说明。某个物品数量变为0时需直接删除该物品
      item: &item
        品质: string. 物品的品质
        数量: number. 物品的数量
        类型: string. 物品的类型，有且仅有'武器防具'，'其它物品'，'消耗品'，'材料'四种类型
        描述: string. 物品的描述
      "{物品名称}":
        <<: *item
    货币:
      白金币: number. 白金币数量
      金币: number. 金币数量
      银币: number. 银币数量
      铜币: number. 铜币数量
    装备:
      equipment: &equipment
        品质: string. 装备的品质
        描述: string. 装备的描述
      武器:
        description: object. 当前<user>的武器，每个武器为一个对象，对象的键名(key)即为武器名称，随故事进展变化。可以添加或删除武器（装备更新模板在'variables_update_format'中，添加武器时需严格遵守装备更新模板）。武器名称中不要附带品质说明
        <<: *equipment
        位置: string. 武器装备的位置，需根据医学常识记录
      防具:
        description: object. 当前<user>的防具，每个防具为一个对象，对象的键名(key)即为防具名称，随故事进展变化。可以添加或删除防具（装备更新模板在'variables_update_format'中，添加防具时需严格遵守装备更新模板）。防具名称中不要附带品质说明
        <<: *equipment
        位置: string. 防具装备的位置，需根据医学常识记录。如是套装或连体衣，需记录为'全身'
      饰品:
        description: object. 当前<user>的饰品，每个饰品为一个对象，对象的键名(key)即为饰品名称，随故事进展变化。可以添加或删除饰品（装备更新模板在'variables_update_format'中，添加饰品时需严格遵守装备更新模板）。饰品名称中不要附带品质说明
        <<: *equipment
        位置: string. 饰品装备的位置，需根据医学常识记录，可细致到某个手指
  登神长阶:
    是否开启: string. 该值仅分为'是'或'否'，变为'是'后不能再次更改
    要素:
      description: "object. 当前已获得的要素列表。每个要素为一个键值对，记录格式为’名称: 描述'，随故事进展变化。可以添加或删除要素（即增删键值对，要素更新模板在'variables_update_format'中，添加要素时需严格遵守要素更新模板）。最多可持有 3 个要素"
      element_name: &element
        对应元素的具体描述
      "${要素名称}": *element
    权能:
      description: "object. 当前已获得的权能列表。每个权能为一个键值对，记录格式为’名称: 描述'，随故事进展变化。可以添加或删除权能（即增删键值对，权能更新模板可参考要素更新模板，但路径不要相同）。有且仅有 1 个权能！"
      "${权能名称}": *element
    法则:
      description: "object. 当前所执掌的法则列表。每个法则为一个键值对，记录格式为’名称: 描述'，随故事进展变化。可以添加或删除法则（即增删键值对，法则更新模板可参考要素更新模板，但路径不要相同）。在获得'神位'之前，此列表有且仅能包含 1 个法则。获得'神位'后，此限制解除，可以添加多个法则"
      "${法则名称}": *element
    神位: string. 当前的神位
    神国:
      名称: string. 神国的名称
      描述: string. 神国的描述
  命运系统:
    命运点数: number. FP，驱动'命运红线'系统的核心资源
    红线对象:
      description: object. 当前<user>的红线对象列表。每个'红线对象'为一个 object 类型，对象的键名(key)即为红线对象名称。必须根据<user>的意图来添加或删除红线对象（红线对象更新模板在'variables_update_format'中，添加红线对象时需严格遵守红线对象更新模板）。当某位红线对象没有和<user>缔结红线，而<user>不再留恋该红线对象时，需直接删除该红线对象
      partner: &partner
        生命层级: string. 当前红线对象的生命层级
        等级: number. 当前红线对象的等级
        种族: string. 当前红线对象的种族
        身份: array. 当前红线对象的身份和社会地位，可以是复数，绝不允许拥有重复的身份（更新模板参考'角色.身份'的更新模板）
        职业: array. 当前红线对象的职业，可以是复数，绝不允许拥有重复的职业（更新模版参考'角色.职业'的更新模板）
        性格: string. 当前红线对象的性格，随故进展变化
        喜爱: string. 当前红线对象喜爱的人和事物、特长、习惯、爱好、性癖等，随故进展变化
        外貌特质: string. 当前红线对象的生理特征、外貌、身高、身材、气质、嗓音等
        衣物装饰: string. 当前红线对象的服装、饰品、配饰、化妆、纹身、穿环、烙痕等，随故进展变化
        角色装备: string. 当前红线对象的武器、防具和魔法饰品等
        登神长阶: string. 当前红线对象所持有的具体'要素'、'权能'、'法则'，严格按照'【要素1/要素2/要素3】【权能】【法则】'的格式进行记录。如未开启登神长阶，则记录为'未开启'
        是否缔结红线: string. 当前红线对象是否与<user>正式缔结红线关系，仅为'是'或'否'。变为'是'后不可再次更改
        好感度: |-
          number. 决定红线对象对<user>的好感程度。范围[0, 1000]。越低越讨厌，越高越喜欢
          单次互动引起的变化范围为[-50, 50]点,好感度到达上限'1000'后禁止继续增加！
          在更新此值时，数值变化量必须严格在-50到50的范围内
          增加规则 - <user>投其所好（送礼）、解决红线对象问题（做任务）、说话中听、关键时刻帮得上忙（战斗支援）以及日常的关心陪伴等
          减少规则 - 被<user>赠送讨厌/厌恶的物品、说错话/冒犯、在战斗或危机中做出负面行为、忽视与长期冷漠、触犯角色专属禁忌（雷区）等
        评价: string. 当前红线对象对<user>的看法与心里话
        背景故事: string. 当前红线对象的人物背景故事，随故进展变化
        羁绊技能:
          description: "object. 缔结命运红线后才觉醒，需在缔结红线关系后立即添加技能。每个技能为一个键值对，技能分为主动和被动两种技能，严格按照'技能名称(类型): 技能效果'的格式进行记录，随故事进展变化。每种类型的技能可以有多个，但应维持在一个合理的数量内"
          partner_skill: &partner_skill
            羁绊技能的具体效果
          "${技能名(主动)}": *partner_skill
          "${技能名(被动)}": *partner_skill
      "{人物名}":
        <<: *partner
  每日新闻:
    description: 以下新闻内容在每天都要更新，更新后的新闻内容需要和上一次的新闻内容不同！
    阿斯塔利亚快讯: string. 每天仅生成一次。快讯分为【势力要闻】、【尊位行迹】、【军事行动】、【经济动脉】、【灾害预警】模块，每个模块用'|'分隔。发布整个大陆最重要、最具有普遍影响力的“硬新闻”。内容偏客观、正式、严肃
    酒馆留言板: string. 每天仅生成一次。留言板分为【高额悬赏】、【遗迹发现】、【目击报告】、【怪物异动】、【人物八卦】模块，每个模块用'|'分隔。是指流言蜚语、奇闻异事和冒险者圈内新闻。消息真假难辨，充满了个人色彩和夸张成分，但往往隐藏着任务线索或独特的机遇
    红线助手的午后茶会: string. 每天仅生成一次。午后茶会分为【情感动态】、【社交圈逸闻】、【情敌情报】、【隐秘八卦】、【时尚风向】模块，每个模块用'|'分隔。由系统助手负责为你爆料大陆上各种知名人物、特别是与你潜在后宫目标相关的八卦、绯闻和情感动态，内容风格极度偏向系统助手的人格特征
